
метод транзакции (входящей) инвестиции  createIncomePayment()
метод транзакции на снятие процентов  createOutcomePayment()

Вычисление и снятие доступных (с учетом всей прибыли и учетом ранее снятых денег)payUserAllowedProfit()


метод вычисления дневного прибыли с транзакции за 1 день  calcTransactionDailyProfit()


вычисление моей прибыли всего без учета снятий (1% в день) calcMyProfitTotal()
Вычисления всех моих инфестиций calcMyInvestTotal()

вычисление моей прибыли с моих рефералов (10%в день  от их 1% в день) calcReferralsInvestTotal()

подсчет суммарной моей прибыли с своих вложений и с рефералов без учета снятия  calcActualTotalProfit()
1) считаем каждую свою входящую транзакцию.. считаем кол-во дней и берем 1%
2) считаем каждую транзакцию нашего  реферала (в процессе)
3) вычисляем доход  с своих процентов и процентов рефералов
4) проверяем свои исходящие выплаты
5) если общий доход больше снятых ранее денег.. снимаем сколько доступно
